<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Cao Yong,ednencaox@gmail.com"><title>操作系统（二） · Eden's Blog</title><meta name="description" content="进程调度进程进程是程序在计算机中的一个执行过程。程序是静态的，而进程是动态的。
每个进程都有一个进程控制块，操作系统用来存放进程有关的信息。
进程的创建四种主要事件会导致进程的创建：

系统初始化
正在运行的程序执行了创建进程的系统调用
用户请求创建一个新的进程
一个批处理作业的初始化


进程的终"><meta name="keywords" content="JavaScript,TypeScript,Linux,macOS"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/blog/css/style.css"><link rel="stylesheet" href="/blog/css/blog_basic.css"><link rel="stylesheet" href="/blog/css/font-awesome.min.css"><link rel="stylesheet" href="/blog/css/atom-one-light.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/blog/images/logo@2x.png" style="width:127px;"><h3 title><a href="/">Eden's Blog</a></h3><div class="description"><p>一些奇奇怪怪的东西</p></div></div></div><ul class="social-links"><li><a href="/blog/atom.xml"><i class="fa fa-rss"></i></a></li><li><a href="http://github.com/EdenCao"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="archives/">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>操作系统（二）</a></h3></div><div class="post-content"><h1 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h1><h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><p>进程是程序在计算机中的一个执行过程。程序是静态的，而进程是动态的。</p>
<p>每个进程都有一个进程控制块，操作系统用来存放进程有关的信息。</p>
<h3 id="进程的创建"><a href="#进程的创建" class="headerlink" title="进程的创建"></a>进程的创建</h3><p>四种主要事件会导致进程的创建：</p>
<ul>
<li>系统初始化</li>
<li>正在运行的程序执行了创建进程的系统调用</li>
<li>用户请求创建一个新的进程</li>
<li>一个批处理作业的初始化</li>
</ul>
<!-- -->
<h3 id="进程的终止"><a href="#进程的终止" class="headerlink" title="进程的终止"></a>进程的终止</h3><p>进程的终止通常由以下四种主要事件导致：</p>
<ul>
<li>正常退出（自愿）</li>
<li>出错推出（自愿）</li>
<li>严重错误（非自愿）</li>
<li>被其他进程杀死（非自愿）</li>
</ul>
<!-- -->
<h3 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a>进程的状态</h3><p><img src="//upload-images.jianshu.io/upload_images/5617469-8e08e1fbe8970bf0.jpg" alt="进程状态转换.jpg">基本状态：执行、就绪、阻塞<br></p>
<p> 其他状态：挂起、僵死、等待</p>
<p><strong>挂起：</strong></p>
<ul>
<li>将暂不执行的进程换出到外村，节省内存空间</li>
</ul>
<!-- -->
<p><img src="//upload-images.jianshu.io/upload_images/5617469-d94bbff6214608f1.jpg" alt="进程五状态.jpg"><img src="//upload-images.jianshu.io/upload_images/5617469-988366503631c074.jpg" alt="linux进程状态图.jpg">### 进程调度的时机</p>
<ul>
<li>新进程的创建</li>
<li>当前进程的退出</li>
<li>正在执行的进程阻塞</li>
<li>I/O中断发生</li>
</ul>
<!-- -->
<h2 id="调度算法"><a href="#调度算法" class="headerlink" title="调度算法"></a>调度算法</h2><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><ul>
<li><p>CPU的分配方式 - 非剥夺式（非抢占式）</p>
<ul>
<li><p>剥夺式（抢占式）</p>
<!-- -->
</li>
</ul>
</li>
<li><p>系统的分时方式 - 批处理系统</p>
<ul>
<li>交互系统</li>
<li><p>实时系统</p>
<!-- -->
</li>
</ul>
</li>
</ul>
<!-- -->
<h3 id="调度目标"><a href="#调度目标" class="headerlink" title="调度目标"></a>调度目标</h3><ul>
<li>公平（让每个用户满意）</li>
<li>平衡（系统效率最高）</li>
</ul>
<!-- -->
<h3 id="批处理系统"><a href="#批处理系统" class="headerlink" title="批处理系统"></a>批处理系统</h3><h4 id="调度目标-1"><a href="#调度目标-1" class="headerlink" title="调度目标"></a>调度目标</h4><ul>
<li>吞吐量：系统每小时完成的作业数</li>
<li>周转时间： 一个作业从提交到完成时的统计平均时间</li>
<li>CPU利用率</li>
</ul>
<!-- -->
<h4 id="批处理系统中的调度算法"><a href="#批处理系统中的调度算法" class="headerlink" title="批处理系统中的调度算法"></a>批处理系统中的调度算法</h4><p><strong>先来先服务</strong></p>
<ul>
<li><p>按照请求CPU的顺序使用CPU - 就绪队列时间先后的顺序</p>
<ul>
<li><p>队首取，队尾加</p>
<!-- -->
</li>
</ul>
</li>
<li><p>易于理解、便于实现</p>
</li>
<li>对短作业不公平</li>
</ul>
<!-- -->
<p><strong>最短作业优先</strong></p>
<ul>
<li>提高平均周转时间</li>
<li>预知作业运行时间</li>
<li><p>最短剩余时间优先 - 最短作业优先的强占版</p>
<ul>
<li><p>新作业比正在执行的作业剩余时间短</p>
<!-- -->
</li>
</ul>
</li>
<li><p>长作业无限期等待 - 有失公平性</p>
  <!-- -->
</li>
</ul>
<!-- -->
<p><strong>最高响应比优先算法</strong></p>
<ul>
<li><p>响应比 - 作业等待时间/作业所需运行时间</p>
  <!-- -->
</li>
<li><p>优先考虑短作业</p>
</li>
<li>防止长作业无限等待</li>
</ul>
<!-- -->
<h3 id="交互系统"><a href="#交互系统" class="headerlink" title="交互系统"></a>交互系统</h3><h4 id="调度目标-2"><a href="#调度目标-2" class="headerlink" title="调度目标"></a>调度目标</h4><ul>
<li><p>响应时间 - 快速响应交互请求</p>
  <!-- -->
</li>
</ul>
<!-- -->
<h4 id="交互系统中的调度算法"><a href="#交互系统中的调度算法" class="headerlink" title="交互系统中的调度算法"></a>交互系统中的调度算法</h4><p><strong>轮转法</strong></p>
<ul>
<li><p>使用时间片进行调度的算法，时间片段用完后会排到队尾，考虑到CPU效率与用户等待时间一般设置为20ms-50ms - 未用完时间片就I/O阻塞的，当I/O就绪后到就绪队尾重新排队。可以为其单设队列，优先考虑I/O后就绪进程直至其用完时间片。</p>
  <!-- -->
</li>
<li><p>优先级 - 优先级高的进程先运行，同优先级的进程轮转（同一队列中轮转）</p>
<ul>
<li><p>每个进程设立优先级，高优先级的队列中没有进程，调度下一级队列 - 静态设定</p>
<ul>
<li><p>动态设定：在优先级高的进程运行一个时间片后降低其优先级（防止高优先级进程独占CPU饿死低优先级的进程）</p>
<!-- -->
</li>
</ul>
<!-- -->
</li>
</ul>
</li>
</ul>
<!-- -->
<p><strong>彩票法</strong></p>
<ul>
<li>向进程提供各种系统资源的彩票</li>
<li><p>调度时随机抽取彩票，拥有该彩票的资源得到资源 - 可给重要的今晨更多的彩票</p>
<ul>
<li><p>协作进程可以交换彩票</p>
<!-- -->
</li>
</ul>
</li>
</ul>
<!-- -->
<p><strong>公平分享法</strong></p>
<ul>
<li><p>为每个用户分配一定比例的CPU时间 - 假设用户1开了四个进程ABCD，用户2开设一个进程E，则CPU调度有可能为AEBECEDEAEBE…</p>
  <!-- -->
</li>
<li><p>按照比例个用户之间挑选进程</p>
</li>
</ul>
<!-- -->
<h3 id="实时系统"><a href="#实时系统" class="headerlink" title="实时系统"></a>实时系统</h3><h4 id="调度目标-3"><a href="#调度目标-3" class="headerlink" title="调度目标"></a>调度目标</h4><ul>
<li><p>满足截止时间 - 正确的但是迟到的应答比没有更糟糕</p>
  <!-- -->
</li>
<li><p>硬实时 - 必须满足的绝对的截止时间</p>
  <!-- -->
</li>
<li><p>软实时 - 可以容忍偶尔的错失截止时间</p>
  <!-- -->
</li>
</ul>
<!-- -->
<h4 id="基本条件"><a href="#基本条件" class="headerlink" title="基本条件"></a>基本条件</h4><ul>
<li>提供必要的信息</li>
<li>系统处理能力强</li>
<li>采用抢占式调度机制</li>
<li>具有快速切换机制</li>
</ul>
<!-- -->
<h4 id="调度算法-1"><a href="#调度算法-1" class="headerlink" title="调度算法"></a>调度算法</h4><p><strong>最早截止时间优先算法</strong></p>
<p>先把截止时间早的任务给完成，否则这个任务如果在截止时间后才完成就没有意义了。</p>
<p><strong>进程切换开销</strong></p>
<ul>
<li>时间和空间上的系统开销</li>
<li>保存和恢复进程的上下文</li>
</ul>
<!-- -->
<h2 id="Linux的进程调度"><a href="#Linux的进程调度" class="headerlink" title="Linux的进程调度"></a>Linux的进程调度</h2><p>这里朱凯豪师兄总结的特别好，这里<a href="https://link.jianshu.com?t=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FR99AZagHRvSrAKXXJmCWnA" target="_blank" rel="noopener">附上链接</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-05-06</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,//edencao.github.io/blog/2019/05/06/Operating-System-(2)/,Eden's Blog,操作系统（二）,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/blog/2019/05/06/Operating-System-(I)/" title="操作系统（一）">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/blog/2019/05/06/VScode-Configuration-List/" title="VScode 配置清单">下一篇</a></li></ul></div><div class="gitment" id="comments"></div><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var styleElm = document.createElement('link');
styleElm.rel = 'stylesheet'; 
styleElm.href = 'https://imsun.github.io/gitment/style/default.css';
document.head.appendChild(styleElm)

var gitment = new Gitment({
    id: document.querySelector('.post-title').textContent.split(' ').join('_'),
    owner: 'EdenCao',
    repo: 'blog',
    oauth: {
        client_id: '524a2ec70d9f93b7d96f',
        client_secret: '403fd7b08932eb72291927b7c5bb6e574f7aa379'
    }
});
gitment.render('comments')</script></div></div></div></div><script src="/blog/js/jquery.js"></script><script src="/blog/js/jquery-migrate-1.2.1.min.js"></script><script src="/blog/js/jquery.appear.js"></script><script src="/blog/js/highlight.pack.js"></script><script>hljs.configure({
  tabReplace: '  ',
})
hljs.initHighlightingOnLoad();</script></body></html>